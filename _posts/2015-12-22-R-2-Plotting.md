---
layout: post
title: Learning R - 2. Random data and plotting
---
For me, coding redefines possibility. Technology now allows data analysis in ways never before possible, as well as a new avenue for human creativity. The best example of this, I believe, is data visualization. Producing effective and interesting graphs can not only tell the science better - it can draw viewers in who wouldn't otherwise read the science.

In this post, we'll use R's excellent plotting capabilities to learn about normal distributions, linear regression, and a bit more. With constant feedback from the plots in R, we'll start learning R syntax along the way.

**This is the second post in a series on R. This post covers:**
* How do I generate random data?
* How do I plot data?
* How do I run linear regression?

The first post in the series is [an introduction to R](https://mgsosna.github.io/R-1-Intro/). It covers importing data, introduction to viewing data, assigning variables, and the help function. The most important code from that post is listed here:
```r
c()             # "Concatenate," or combine. This is how you tell R to
                # expect multiple elements
x <- c(5, 10)   # x is now a two-element vector of the numbers 5 and 10
x[x > 7]        # Subset x on only the values greater than 7
```
If you're determined to start learning at this post instead of the previous one, you can download R [here](https://www.r-project.org/), and you can download RStudio [here](https://www.rstudio.com/).

Finally, to give you a sample of the graphical possibilities in R, below are a few beautiful graphs I found online. All were produced in R. For my courteous Facebook friends supporting my blog but not terribly interested in coding: enjoy some pretty pictures!

**Miguel Rios: every geotagged tweet 2009-2013** <br>
<img align="center" src="https://raw.githubusercontent.com/mgsosna/mgsosna.github.io/master/images/R-2-plotting/geotag_tweets.jpg">

**Sample data adopted from [plot.ly](https://plot.ly/)** <br>
<img align="center" src="https://raw.githubusercontent.com/mgsosna/mgsosna.github.io/master/images/R-2-plotting/volcano.png">

**Ramnath Vaidyanathan: baseball strikeouts using the R package Shiny** <br>
<img align="center" src="https://raw.githubusercontent.com/mgsosna/mgsosna.github.io/master/images/R-2-plotting/strike.png">

(Also, [here's a great link](http://spatial.ly/2014/11/r-visualisations-design/) comparing the raw R exports and then the final publication graphics for the book [_London: The Information Capital_](http://theinformationcapital.com/).)

# Random data: histograms
## Introduction
Randomness might seem like a weird place to start, but it's actually very useful for learning about distributions and plotting. Let's start with the normal - also called Gaussian distribution.
<img align="center" src="https://raw.githubusercontent.com/mgsosna/mgsosna.github.io/master/images/R-2-plotting/gaussian.jpg">

The above plots are a density plot and a histogram, which are pretty similar ways of showing the data. Density plots are particularly useful if you have a lot of data and are estimating the underlying distribution generating that data. Histograms divide the data into bins and show how many points are in each bin.

These distributions reflect data that were generated with one line of code:
```r
data <- rnorm(10000000, 0, 1)
```
Yup, I generated 10 million random values just like that. I probably could have accomplished the same point with the graphs above by just using 1,000 or 10,000 values... but too late now! You can see these values by typing data and hitting enter, but R will show you all the values... so I wouldn't do that unless you want to feel like you're in the Matrix. Use `head(data)` or `summary(data)` instead.

## The normal distribution
The two most important parameters characterizing a normal distribution are the mean and standard deviation. The mean is the "average" value, which you can see as the peak of the distributions above. The standard deviation is the "spread" of the data. The `rnorm` command takes three arguments: how many numbers you want, and the mean and standard deviation of the distribution you're drawing from.

Here's where R gets fun. Why trust anything I'm telling you about normal distributions? I'm some random person on the internet. You now know enough about R to figure out anything you want about the Gaussian. Instead of puzzling about some abstract definition of standard deviation you read from a textbook, for example, why not generate some distributions and see for yourself?

# Standard deviation and the normal distribution
```r
# Tell R to place two plots side by side
par(mfrow = c(1, 2))

# Generate the data
x <- rnorm(1000, 0, 1)   # 1000 values, mean = 0, standard deviation = 1
y <- rnorm(1000, 0, 5)   # 1000 values, mean = 0, standard deviation = 5

# Plot it!
plot(density(x), xlim = c(-20, 20), ylim = c(0, 0.4))
plot(density(y), xlim = c(-20, 20), ylim = c(0, 0.4))
```
Notes:
 * My plots are a bit cleaned up compared to the code above. The code I used for all plots are at the end of this blog post.
 * The `xlim` and `ylim` arguments above specify the limits on the x- and y-axes, respectively, which is important for showing this comparison. Otherwise, R scales each plot axis to zoom in as much as possible on the data.

<img align="center" src="https://raw.githubusercontent.com/mgsosna/mgsosna.github.io/master/images/R-2-plotting/sd.png">

As is strikingly clear, having a small standard deviation concentrates most of the distribution around the mean: most of the values are similar. A large standard deviation, on the other hand, means there is a lot of spread in the data.

## Proportion of the normal distribution within a standard deviation  
How much of a normal distribution is supposed to be within one standard deviation of the mean? Instead of looking it up on Wikipedia, you can figure it out through R by **subsetting** and using the **length** of the data variable:

```r
length(x[x > mean(x) - sd(x) & x < mean(x) + sd(x)]) / length(x)
```

This code might seem like a lot, but it can be broken into a few simple parts:

     length(                                  # How many values are there?
     x[x > mean(x) - sd(x)     # Subset x to only values > 1 SD below the mean...
     &                                              # and...
     x < mean(x) + sd(x)])    # ... less than one SD above the mean.
     / length(x)                         # Now, divide all that by the total to get a proportion.

It should be about 68%. Visually, that looks like the plot below. Unsurprisingly, because the standard deviation is 1, the shaded region covers data values from -1 to 1.

(Another way to write that is `mean((x > mean(x) - sd(x)) & (x < mean(x) + sd(x)))`, which uses a little R trick involving True/False statements. See my comment [at the end](##Footnotes).)

















## Footnotes
* So blah blah blah
